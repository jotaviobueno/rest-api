// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Person {
  id         String       @id @default(auto()) @map("_id") @db.ObjectId
  firstName  String       @map("first_name")
  lastName   String       @map("last_name")
  username   String
  email      String
  password   String
  avatarUrl  String       @map("avatar_url")
  createdAt  DateTime     @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime     @default(now()) @map("updated_at") @db.Timestamp
  deletedAt  DateTime?    @map("deleted_at") @db.Timestamp
  personRole PersonRole[]

  @@map("person")
}

model PersonRole {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  person   Person @relation(fields: [personId], references: [id])
  personId String @map("person_id") @db.ObjectId
  role     Role   @relation(fields: [roleId], references: [id])
  roleId   String @map("role_id") @db.ObjectId

  @@map("person-role")
}

model Role {
  id          String       @id @default(auto()) @map("_id") @db.ObjectId
  name        String       @unique
  description String?
  createdAt   DateTime     @default(now()) @map("created_at") @db.Timestamp
  updatedAt   DateTime     @default(now()) @map("updated_at") @db.Timestamp
  personRole  PersonRole[]

  @@map("role")
}
